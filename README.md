# fullstack-serverless
풀스택 서버리스 -네이더 다빗- 을 연습하는 repo입니다.

### 22.04.05

기본적인 amplify cli 설정 및 api 생성까지 마침.

### 22.04.06

제 4장 기본적인 components 작성 마침. 의존성 패키지 및 자잘한 에러 수정해야함!

### 22.04.07

제 4장에 대한 완전한 구현을 마침. @aws-amplify/ui-react 패키지는 다운그레이드 된 1.2.5 버전을 사용해야 함.
velog에 풀스택 서버리스에 대한 포스트 올림.

### 22.04.09

제 5장에 대한 components 작성중... 사용자 인증을 직접  구현하는 파트이다.

formState 변화에 직접적인 영향을 주는 components 작성 완료. updateForm 헬퍼 함수 작성해야함!

chapter6 Lambda Trigger를 추가하는 과정에서 계속 isAdmin을 통한 관리자 이메일 인증이 되지 않는 이슈가 발생함.
Lambda exports.handler에 대한 세부적인 공부를 진행한 뒤 exports.handler paramter로 전달되는 event에 대해 분석해보아야함...

### 22.04.10

제 6장에 대한 모든 작업을 마침. 사용자 인증 구현에서 Admin 계정을 이메일을 통해 분류하고 로그인 시 Admin 페이지가 추가적으로 로딩되도록 설정함.
Create account를 confirm했을 때 Lambda Trigger를 발생시켜 메일의 주소를 받고 만약 메일 주소가 Admin 배열에 포함된 주소면 사용자를 Admin 그룹에 포함시키도록 함.
또한 사진을 업로드할 때 1000픽셀 이상의 큰 파일의 경우 1000파일로 압축해서 저장되고 보여지도록 설정하는 컴포넌트를 생성함.
Amazom S3 Storage에 사진이 업로드되었을 때 Lambda Trigger를 발생시키도록 하여 사진의 크기를 재고 조정하는 로직이다.

8장에 대한 공부를 먼저 진행한다. 7장은 REST에 대한 내용이므로 추후 2장과 같이 진행한다.
8장에서는 그래프QL API를 확장하여 AWS AppSync를 활용한 음악 축제 애플리케이션을 제작한다.

이 애플리케이션에서는 다음 항목이 필요하다.
-Amazon DynamoDB는 무대와 공연 테이블을 생성하는 데 사용됨.
-그래프 QL API는 무대와 공연을 생성, 조회, 수정, 삭제 및 리스트를 나열하는 데 사용됨.
-관리자만 무대 혹은 공연을 생성, 수정 및 삭제할 수 있다.
-무대와 공연 테이블 사이에 관계가 형성되어야 한다.
-사용자는 모든 공연을 볼 수 있을 뿐만 아니라 공연의 세부 정보를 확인할 수 있어야 한다.

-뭔지 모르지만 오류가 너무 잦다. 오타도 많고
책에 많은 검수를 진행하지 못한 것 같다. 전체적인 일관성도 조금 부족한 편이다.
단지 풀스택 서버리스를 간단하고 빠르게 구현해볼 수 있음에 감사해야 할지도..?
나머지 모르는 자잘한 지식들에 대한 설명이 없는 편이다.
기둥만 잡아주고 나머지는 내가 직접 공부하면서 이해해야하는 것!
그래도 짧은 책 안에 방대한 양의 지식이 들어있어 나쁘지는 않다. 하지만 조금 어렵다.

### 22.04.11

chapter8에서 발생한 이슈를 해결하기 위해 코드를 살펴보았으며 문제는 Appsync를 설정하고 백엔드 쿼리를 작성하는 과정에서 일어난 것 같다. 현재 어떤 사용자 풀에도 쿼리에 접근할 수 있는 권한이 주어지지 않은 것 같아 백엔드를 수정하고 API를 재정비할 필요가 있을 것 같다.

추가적으로 렌더링되는 컴포넌트들의 흐름을 이해하기 위해 각 컴포넌트에 대한 역할과 Flow를 적은 주석을 다는 중이다.

### 22.04.12

수많은 고난과 시도 끝에 어찌어찌 에러를 잡아서 예시를 완성했다!!!
Admin그룹을 식별하지 못해 API를 수정하는게 이루어지지 못한 것(Admin만 Mutation이 가능하고 나머지는 read만 가능하다.)에 대한 에러를 며칠 만에 고쳤다...
바뀐 내용은 없는데, Cognito에 반영이 늦은건지 뭐가 문제인지 정확히 파악하지 못한 것이 아쉽다. 그래도 전체적인 로직을 아주 지독히 알고 공부했으니 만족한다.

알아두고 기억해야 할 것들

-@connection을 @hasOne과 @hasMany로 교체한 것
-@key를 @index로 교체한 것
-AppSync를 통해 Admin계정을 그룹에 추가하는 로직(Lambda Trigger)을 구성하는 방법(by Post Confirmation Lambda Trigger).
-전체적으로 amplify cli를 통해 auth와 api를 추가하고 사용자 풀에 권한을 부여 및 사용자 풀에서 특정 사용자를 그룹짓는 방법.

그 외에도 많지만 일단은 이정도만 기억하자.

이번 챕터를 통해 AWS를 연동한 GQL에 대한 사용법과 그 로직을 꽤 많이 이해한 것 같다. 처음보다 훨씬 뭔가 뚫린 기분이다.
남은 챕터도 많지 않으니 힘내자!!

### 22.04.13

오늘은 chapter9에 대한 내용을 탐구한다. 여기서 다루는 주 내용은 Amplify DataStore에 대한 것인데, DataStore는 REST나 GQL과 다른 방식의 API이다.
쿼리나 뮤테이션을 이용하는 대신 SDK를 사용하고, 각 플랫폼의 로컬 스토리지 엔진을 사용해 로컬과 클라우드 모두에 데이터를 저장하고 유지한다.
DataStore는 로컬 데이터를 온라인 환경에서 GQL 백엔드에 자동으로 동기화하여 클라우드에 업데이트한다.

DataStore SDK를 이용하면 CRUD 작업을 수행하고 DataStore에 직접 작성하기만 하면 된다. 또한 DataStore는 충돌에 대한 감지와 해결을 자동적으로 처리한다.

DataStore의 구성 요소는 다음과 같다.

-AppSync GQL API
-오프라인에서도 데이터를 유지하는 로컬 스토리지 저장소 및 동기화 엔진
-로컬 스토리지 저장소와 상호작용하기위한 SDK
-서버에서 정교한 충돌 감지 및 충돌 해결을 가능하게 하는 특수 동기화 지원 GQL 리졸버

### 22.04.15

오늘은 AWS-Amplify를 이용해 만들 토이프로젝트의 기본적인 설계를 하였다. 공유시집 애플리케이션이며, API제작, 유저 인증 등의 다양한 기능을 구현해 볼 예정이다.
자세한 내용은 이곳에서!https://geun-oh.notion.site/29b02e92c0154ea0bd771bbf7a4f2549
